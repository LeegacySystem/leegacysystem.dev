---
title:  "IEE 802.1D-2004 Broke My Lab :("
date:   2019-01-14 22:22:23
categories: [Firewall]
tags: 
- RFC
- 802.1D-2004 
---

Okay so slightly misleading title as 802.1D-2004 didn't actually break my lab but it did cause a bit of head scratching as to why my lab wasn't working as expected. 

To summarise, I wanted to view all STP packets exchange in a small three switch topology. I didn't want to set up loads of port mirroring so I thought it would be best to create a LAB that connected 3 Juniper vQFXs together through a single linux node with three bridges for each 'physical connection'; this would give me a single place to capture all traffic.

So an hour later (20 minute vQFX boot time = yay) I had configured very basic vQFXs to allow LLDP on all interfaces and enabled bridging on the Linux box. I was sure that I had configured Linux correctly as I had done this before but I wasn't seeing LLDP on either switch. After some captures on the Linux box I noticed DHCP traffic was making it to the bridg interface but LLDP wasn't getting past the two physical interfaces. The screenshot below shows first DHCP on br1 and then LLDP on eth0.

<div style="text-align:center;"><a href="{{ site.url }}/images/posts/2019/01/capture.png"><img src="{{ site.url }}/images/posts/2018/01/vsrx-output.png" width="520" ></a></div>