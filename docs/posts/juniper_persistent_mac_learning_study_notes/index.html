<!DOCTYPE html>
<html lang="en">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <title>
  Juniper Persistent MAC Learning Study Notes · Leegacy System
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="author" content="Lee Dowdells">
<meta name="description" content="This will be a very short port looking into persistent MAC learning.
Persistent MAC learning (also known as sticky MAC) allows for a switch to retain dynamically learned MACs and their associated interfaces after a reboot of the system. Persistent learning has to be enabled as by default it is disabled. When coupled with MAC limiting methods covered previously persistent learning ensures that only trusted devices are connected to a switch port even after a reboot when any counters would have cleared.">
<meta name="keywords" content="blog, devops, neteng, juniper">
<meta name="fediverse:creator" content="" />


  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Juniper Persistent MAC Learning Study Notes">
  <meta name="twitter:description" content="This will be a very short port looking into persistent MAC learning.
Persistent MAC learning (also known as sticky MAC) allows for a switch to retain dynamically learned MACs and their associated interfaces after a reboot of the system. Persistent learning has to be enabled as by default it is disabled. When coupled with MAC limiting methods covered previously persistent learning ensures that only trusted devices are connected to a switch port even after a reboot when any counters would have cleared.">

<meta property="og:url" content="https://www.leegacysystem.dev:1313/posts/juniper_persistent_mac_learning_study_notes/">
  <meta property="og:site_name" content="Leegacy System">
  <meta property="og:title" content="Juniper Persistent MAC Learning Study Notes">
  <meta property="og:description" content="This will be a very short port looking into persistent MAC learning.
Persistent MAC learning (also known as sticky MAC) allows for a switch to retain dynamically learned MACs and their associated interfaces after a reboot of the system. Persistent learning has to be enabled as by default it is disabled. When coupled with MAC limiting methods covered previously persistent learning ensures that only trusted devices are connected to a switch port even after a reboot when any counters would have cleared.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2019-03-31T12:30:00+00:00">
    <meta property="article:modified_time" content="2019-03-31T12:30:00+00:00">
    <meta property="article:tag" content="Juniper">
    <meta property="article:tag" content="Routing">
    <meta property="article:tag" content="JNCIS-ENT">
    <meta property="article:tag" content="MAC_Sec">
    <meta property="article:tag" content="L2SEC">




<link rel="canonical" href="https://www.leegacysystem.dev:1313/posts/juniper_persistent_mac_learning_study_notes/">


<link rel="preload" href="/fonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/css/coder.css" media="screen">






  
    
    
    <link rel="stylesheet" href="/css/coder-dark.css" media="screen">
  



 




<link rel="icon" type="image/svg+xml" href="/images/site/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="/images/site/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/images/site/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">









</head>






<body class="preload-transitions colorscheme-dark">
  
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    
    <a class="navigation-title" href="https://www.leegacysystem.dev:1313/">
      Leegacy System
    </a>
    
    
  </section>
</nav>


    <div class="content">
      
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="https://www.leegacysystem.dev:1313/posts/juniper_persistent_mac_learning_study_notes/">
              Juniper Persistent MAC Learning Study Notes
            </a>
          </h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fa-solid fa-calendar" aria-hidden="true"></i>
              <time datetime="2019-03-31T12:30:00Z">
                March 31, 2019
              </time>
            </span>
            <span class="reading-time">
              <i class="fa-solid fa-clock" aria-hidden="true"></i>
              2-minute read
            </span>
          </div>
          
          <div class="categories">
  <i class="fa-solid fa-folder" aria-hidden="true"></i>
    <a href="/categories/juniper/">Juniper</a></div>

          <div class="tags">
  <i class="fa-solid fa-tag" aria-hidden="true"></i>
    <span class="tag">
      <a href="/tags/juniper/">Juniper</a>
    </span>
      <span class="separator">•</span>
    <span class="tag">
      <a href="/tags/routing/">Routing</a>
    </span>
      <span class="separator">•</span>
    <span class="tag">
      <a href="/tags/jncis-ent/">JNCIS-ENT</a>
    </span>
      <span class="separator">•</span>
    <span class="tag">
      <a href="/tags/mac_sec/">MAC_Sec</a>
    </span>
      <span class="separator">•</span>
    <span class="tag">
      <a href="/tags/l2sec/">L2SEC</a>
    </span></div>

        </div>
      </header>

      <div class="post-content">
        
        <p>This will be a very short port looking into persistent MAC learning.</p>
<p>Persistent MAC learning (also known as sticky MAC) allows for a switch to retain dynamically learned MACs and their associated interfaces after a reboot of the system. Persistent learning has to be enabled as by default it is disabled. When coupled with MAC limiting methods covered previously persistent learning ensures that only trusted devices are connected to a switch port even after a reboot when any counters would have cleared.</p>
<p>It is important to clear any persistent MACs before moving them within your network. If you repatch a server to a new unused switch port it may come up, but should its previously active port turn back up its sticky entry will overide the current and would knock the server offline.</p>
<p>There are four main considerations when using persistent learning:</p>
<ol>
  <li><i>Only access ports can be configured with stick MACs</i></li>
  <li><i>The interface cannot be part of a redundant trunk group</i></li>
  <li><i>The interface must not be configured with no-mac-learning</i></li>
  <li><i>The interface must not be configured with 802.1x auth</i></li>
</ol>
<p>Persistent MAC learning is configured under &ldquo;edit ethernet-switching-options secure-access-port interface ge-0/0/0.0&rdquo; with the persistent-learning statement. To verify the MAC is persistent the &ldquo;show ethernet-switching table&rdquo; command can be used to display the type of entry in the forwarding table.</p>

      </div>


      <footer>
        


        
        
        
        
        

        
        
      </footer>
    </article>

    
  </section>

    </div>

    <footer class="footer">
  <section class="container">
    All posts are my own ramblings... sorry study notes.
  </section>
</footer>

  </main>

  

  
  
  <script src="/js/coder.js"></script>
  

  

  


  
  



  

  

  

  
<script defer src='https://static.cloudflareinsights.com/beacon.min.js'
        data-cf-beacon='{"token": "a3e23d0e9f3541179b1ae8f47639e993"}'></script>



  

  

  

  

  

  

  

  

  

  

  
</body>

</html>
