<!DOCTYPE html>
<html lang="en">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <title>
  Juniper Spanning Tree - Key STP Terms · Leegacy System
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="author" content="Lee Dowdells">
<meta name="description" content="It has been a while since I&rsquo;ve last proepry studied Juniper which in turn also explains the lack of posting notes. Hopefully the gap between this post and the next will not be as long.
The reason for this is post is to drill in key STP terms by giving more information than is probably required for the JNCIS-ENT. This is inteded to the be first chapter/post of the many that I will have to write to memorise STP and its flavours.">
<meta name="keywords" content="blog, devops, neteng, juniper">
<meta name="fediverse:creator" content="" />


  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Juniper Spanning Tree - Key STP Terms">
  <meta name="twitter:description" content="It has been a while since I’ve last proepry studied Juniper which in turn also explains the lack of posting notes. Hopefully the gap between this post and the next will not be as long.
The reason for this is post is to drill in key STP terms by giving more information than is probably required for the JNCIS-ENT. This is inteded to the be first chapter/post of the many that I will have to write to memorise STP and its flavours.">

<meta property="og:url" content="http://localhost:1313/posts/juniper-spanning-tree-key-stp-terms/">
  <meta property="og:site_name" content="Leegacy System">
  <meta property="og:title" content="Juniper Spanning Tree - Key STP Terms">
  <meta property="og:description" content="It has been a while since I’ve last proepry studied Juniper which in turn also explains the lack of posting notes. Hopefully the gap between this post and the next will not be as long.
The reason for this is post is to drill in key STP terms by giving more information than is probably required for the JNCIS-ENT. This is inteded to the be first chapter/post of the many that I will have to write to memorise STP and its flavours.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2019-01-14T15:41:23+00:00">
    <meta property="article:modified_time" content="2019-01-14T15:41:23+00:00">
    <meta property="article:tag" content="Juniper">
    <meta property="article:tag" content="STP">




<link rel="canonical" href="http://localhost:1313/posts/juniper-spanning-tree-key-stp-terms/">


<link rel="preload" href="/fonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/css/coder.css" media="screen">






  
    
    
    <link rel="stylesheet" href="/css/coder-dark.css" media="screen">
  



 




<link rel="icon" type="image/svg+xml" href="/images/site/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="/images/site/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/images/site/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">









</head>






<body class="preload-transitions colorscheme-dark">
  
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    
    <a class="navigation-title" href="http://localhost:1313/">
      Leegacy System
    </a>
    
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa-solid fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link " href="/posts/">Blog</a>
            </li>
          
        
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="http://localhost:1313/posts/juniper-spanning-tree-key-stp-terms/">
              Juniper Spanning Tree - Key STP Terms
            </a>
          </h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fa-solid fa-calendar" aria-hidden="true"></i>
              <time datetime="2019-01-14T15:41:23Z">
                January 14, 2019
              </time>
            </span>
            <span class="reading-time">
              <i class="fa-solid fa-clock" aria-hidden="true"></i>
              3-minute read
            </span>
          </div>
          
          <div class="categories">
  <i class="fa-solid fa-folder" aria-hidden="true"></i>
    <a href="/categories/juniper/">Juniper</a></div>

          <div class="tags">
  <i class="fa-solid fa-tag" aria-hidden="true"></i>
    <span class="tag">
      <a href="/tags/juniper/">Juniper</a>
    </span>
      <span class="separator">•</span>
    <span class="tag">
      <a href="/tags/stp/">STP</a>
    </span></div>

        </div>
      </header>

      <div class="post-content">
        
        <p>It has been a while since I&rsquo;ve last proepry studied Juniper which in turn also explains the lack of posting notes. Hopefully the gap between this post and the next will not be as long.</p>
<p>The reason for this is post is to drill in key STP terms by giving more information than is probably required for the JNCIS-ENT. This is inteded to the be first chapter/post of the many that I will have to write to memorise STP and its flavours.</p>
<!-- Using the HTML List below as Jekyll list formating doesn't work as expected, need to fix at some point. -->
<ul style="list-style-type:disc">
  <li>Chapter 1: <a href="http://127.0.0.1:4000/2019/Juniper-Spanning-Tree-Key-STP-Terms/">Key STP Terms</a> </li> 
  <li>Chapter 2: TBC</li>
  <li>Chapter 3: TBC</li>
</ul>  
<h6 id="bridge-id---a-unique-identifier-for-a-switch">
  <strong>Bridge ID</strong> - A Unique identifier for a switch.
  <a class="heading-link" href="#bridge-id---a-unique-identifier-for-a-switch">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h6>
<p>A unique bridge ID Is used to identify all switches participating in an STP topology. It is used to elect the root bridge (lowest bridge ID preferred) and is formed by combining the system MAC address and a configurable priority (default value 32k).</p>
<p>If all switches in a spanning tree topology have the same default Bridge ID priority this can cause a common problem. As the next tie braking metric is the lowest MAC address, typically the older/oldest switch in the network will become the root bridge as it  is likely to have the lowest MAC address. This should be a consideration and avoided.</p>
<pre tabindex="0"><code>Show spanning-tree bridge | match &#34;Bridge ID&#34;
</code></pre><h6 id="root-bridge---the-elected-switch-with-the-lowest-bridge-id">
  <strong>Root Bridge</strong> - The elected switch with the lowest Bridge ID.
  <a class="heading-link" href="#root-bridge---the-elected-switch-with-the-lowest-bridge-id">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h6>
<p>There will only be one Root Bridge in a spanning tree topology. Any other bridges are considered non-root and each will build a shortest path to the Root Bridge blocking of any redundant ports.  As previously mentioned setting a bridge priority is the best way to influence the elected Root Bridge.</p>
<p>Root Protection is a spanning tree feature that can be used to protect the STP topology from being hijacked by a non-authorised bridges with a lower Bridge ID. When configured on interfaces which should not receive lower-priority/preferred BPDUs, the bridges will ignore them or perform the requested action.</p>
<pre tabindex="0"><code>Show spanning-tree bridge | match &#34;Root ID&#34;
</code></pre><h6 id="root-path-cost---the-calculated-cost-to-get-to-the-root-bridge">
  <strong>Root Path Cost</strong> - The calculated cost to get to the Root Bridge.
  <a class="heading-link" href="#root-path-cost---the-calculated-cost-to-get-to-the-root-bridge">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h6>
<p>This value is a cumulative cost of all the links leading to the root bridge across a given path. Each bridge will add its own cost to the BPDU before sending further down the path (received path cost + port cost).</p>
<h6 id="port-cost---every-interface-on-a-bridges-as-an-assigned-and-configurable-cost-value">
  <strong>Port Cost</strong> - Every interface on a bridges as an assigned and configurable cost value.
  <a class="heading-link" href="#port-cost---every-interface-on-a-bridges-as-an-assigned-and-configurable-cost-value">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h6>
<p>This value is used as mentioned in the Root Path Cost calculation, it is added to the received path cost to form the root path cost (received path cost + port cost).  The value is configurable with a range from 1 to 200000000 with 1Ge being 20000. There are two iterations of the speed to cost values 802.1D-2004 defines the newer standard to account for faster interface speeds.</p>
<h6 id="root-port---a-single-port-on-every-non-root-bridges-which-is-the-closest-to-the-root-bridge">
  <strong>Root Port</strong> - A single port on every non-root bridges which is the closest to the Root Bridge.
  <a class="heading-link" href="#root-port---a-single-port-on-every-non-root-bridges-which-is-the-closest-to-the-root-bridge">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h6>
<p>After the root path costs have been calculated, each bridges designates the interface with the lowest cost as the root port.  There can only be one root port but in RSTP an alternate ports can exist, which is a path to the root bridges but with a calculated higher cost.</p>
<pre tabindex="0"><code>Show spanning-tree interfaces | match &#34;root&#34;
</code></pre><p>If no root port exists then that bridges is the Root Bridge. This is because the Root Bridge will not have any interfaces in the Root role.</p>
<h6 id="bonus-round---checking-the-current-switch-to-verify-its-root-bridge-status">
  <strong>Bonus Round</strong> - Checking the current switch to verify its root bridge status
  <a class="heading-link" href="#bonus-round---checking-the-current-switch-to-verify-its-root-bridge-status">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h6>
<pre tabindex="0"><code>show spanning-tree bridge | grep &#34;Bridge|Root&#34;
</code></pre><p>If the returned values are the same then the current Bridge is the Root Bridge of the topology</p>

      </div>


      <footer>
        


        
        
        
        
        

        
        
      </footer>
    </article>

    
  </section>

    </div>

    <footer class="footer">
  <section class="container">
    All posts are my own ramblings... sorry study notes.
  </section>
</footer>

  </main>

  

  
  
  <script src="/js/coder.js"></script>
  

  

  


  
  



  

  

  

  
<script defer src='https://static.cloudflareinsights.com/beacon.min.js'
        data-cf-beacon='{"token": "a3e23d0e9f3541179b1ae8f47639e993"}'></script>



  

  

  

  

  

  

  

  

  

  

  
</body>

</html>
